%
O5530 (MACRO MILL A TRIANGLE)
(26-07-2024 - A)
(AXIS SHOULD BE G17)
(Y IS 0, X #24, WIDTH V #22, HEIGHT U #21)
(R #18 IS CLEARANGE HEIGHT)
(Q #17 IS PECK DEPTH)
(Z #26 IS TOTAL DEPTH)
(D #7 IS SURFACE)
(F #9 FEED RATE)
(A #1 START IN CENTRE, BOOL)
(B #2 CUT DIRECTION 0 CLIMB, 1 CONVENTIONAL. REVERSE FOR REAR PROCESSING)
(C #3 1,2 OR 3 STRAIGHT, COVEX OR CONCAVE BASE)
(E #8 BASE RADIUS MULTIPLIER)
N001IF [#1EQ#0] THEN #1=0
N002IF [#2EQ#0] THEN #2=0
N003IF [#3EQ#0] THEN #3=1
N004IF [#8EQ#0] THEN #8=1
N005IF [[#18EQ0] OR [#18EQ#0] EQ1] GOTO 901
N006IF [[#21EQ0] OR [#21EQ#0] EQ1] GOTO 902
N007IF [[#22EQ0] OR [#22EQ#0] EQ1] GOTO 903
N008IF [[#24EQ0] OR [#24EQ#0] EQ1] GOTO 904
N009IF [[#26EQ0] OR [#26EQ#0] EQ1] GOTO 905
N010#30 = [[#24 + [#21 * 2]] / 2]
N012#30 = [#30*#8]
N013#31 = #22
N014#32 = ABS[#17] (REMOVE SIGN, WILL ALLWAYS BE NEGATIVE)
N016#33 = [#26 - #7](CUT LEFT)
N024IF [#2EQ1] THEN #31=[-#31] (SET CUTTING DIRECTION)
N025IF [#21LT0] THEN #31=[-#31] (MAINTAIN CUTTING DIRECTION)
N030IF [ABS[#33]LT#32] THEN #32 = ABS[#33]
N040G00X#24Y0 (CENTRE APEX)
N050IF [#1NE1] GOTO 070
N060G00X[#24+[#21*1.5]]Y0 (INNER)
N070G01Z#7F#9 (MOVE TO SURFACE)

N080WHILE [#33NE0] DO1
N090#33 = [#33 - [-#32]]
N100G01W[-#32]F[#9/4] (PLUNGE PECK)
N120IF [#1NE1] GOTO 200
N130G01X#24Y0F#9
N200G01U[#21*2]V[-[#31/2]]F#9 (SIDE 1)
(START OF BASE OPTIONS)
N210IF [#3LE1] GOTO 240
N220IF [#3EQ2] GOTO 250
N230IF [#3EQ3] GOTO 260
N240G01V[#31] (BASE)
N245GOTO 280
N250G02V[#31]R[#30] (BASE)
N255GOTO 280
N260G03V[#31]R[#30] (BASE)
(END OF BASE OPTIONS)
N280G01X#24Y0 (CENTRE APEX)
N290IF[#1NE1] GOTO 310
N300G01X[#24+[#21*1.5]]Y0 (INNER)
N310IF [ABS[#33]LT#32] THEN #32 = ABS[#33]
N350END1

N500G00Z#18 (RAPID TO CLEARANCE HEIGHT)
N600GOTO 9999
N901#3000=901(R MISSING OR 0 IN 5530 MACRO CALL)
N902#3000=902(U MISSING OR 0 IN 5530 MACRO CALL)
N903#3000=903(V MISSING OR 0 IN 5530 MACRO CALL)
N904#3000=904(X MISSING OR 0 IN 5530 MACRO CALL)
N905#3000=905(Z MISSING OR 0 IN 5530 MACRO CALL)
N9999
M99
%