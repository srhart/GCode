%
O113(TEST M5590)
(02-08-2024 - B)

(DEEP STOCK TO TEST)
G10P0Z1542.
G00G28WB0.

M6T025300 (12MM SLOT MILL)
M43
G28H0
G50C0
G98G17 (Z-AXIS MILL)
G97
G00X150.Y0Z10.
M1 
G262S5600M13
G66 P5590 X150. Y0. Z-5.5 B12. D3. Q2. H1.4 F600. R10.
G00C0
H90.
G67
M2

O5590(HELICAL PLUNGE)
(03-08-2024 - B)
(MILL A HELICAL POCKET WITH NO CUTTER COMPENSATION)
(X #24, Y #25, CENTRE)
(Z #26 DEPTH)
(B #2 TOOL DIAMETER, DEFAULT TO CURRENT TOOL R)
(D #7 SURFACE)
(F #9 FEED RATE)
(H #11 HELIX SIZE FACTOR E.G. 10MM TOOL *1.8 = 18MM, 1.8 DEFAULT, KEEP BETWEEN 1.1 AND 1.9)
(Q #17 RAMPING ANGLE, IN DEGREES, OF EACH Z CUT, DEFAULT 2.)
(R #18 CLEARANGE HEIGHT)

$TOOL = [[FIX[#4120/100]]MOD100]
$CLIMB = [#3007AND4] (0, IF MIRROR IN Z = 1 )

(DEFAULTS)
IF [#2EQ#0] THEN #2=[[#2300+$TOOL]*2]
IF [#7EQ#0] THEN #7=0
IF [#11EQ#0] THEN #11=1.8
IF [#17EQ#0] THEN #17=2.

(PARAMS)
#117 = ABS[#17] (RAMPING ANGLE)
#119 = #11 (HELIX SIZE FACTOR)
#107 = #7 (COPY D)
#126 = #26 (COPY Z)
#153 = [#2*#119](DIAMETER OF INITAL HELICAL RAMP)
#154 = [#126-#107](DEPTH OF CUT IN Z)
#155 = [#153-#2] (DIAMETER OF CENTRELINE OF TOOL)
#156 = [3.14*#155*[TAN[#117]]] (DEPTH OF CUT PER HELIX)
#157 = FUP[ABS[#154/#156]] (NUMBER OF HELIXES TO REACH Z DEPTH)
#170 = [#154/#157] (ADJUSTED DEPTH OF CUT PER HELIX)

(ERROR CHECKS)
IF [[#119LT1.1]OR[#119GT1.9]] GOTO 901
IF [#26GE#7] GOTO 903

G140G40 (CANCEL ALL COMPS)
G00 X#24 Y#25
U[#155/2] V0.(START POSITION OF HELIX, NOT CENTRED ON POCKET)
G00 Z#18 (RAPID TO RETURN HEIGHT)
G01 Z[#107-#170] F#9 (ONE HELIX HEIGHT ABOVE SURFACE)

WHILE [#107 GT #126] DO1
#107 = #107 + #170
IF[#107 LT #126] THEN #107 = #126 (STOP OVER CUTTING IN Z)
IF [$CLIMB] THEN G03 I-[#155/2] Z#107 F#9 (HELICAL RAMP)
ELSE G02 I-[#155/2] Z#107 F#9 (HELICAL RAMP)
ENDIF
END1
IF [$CLIMB] THEN G03 I-[#155/2] Z#126 F#9 (CLEAN BOTTOM)
ELSE G02 I-[#155/2] Z#126 F#9 (CLEAN BOTTOM)
ENDIF
G01 Z[#18]

GOTO 9999
N901#3000 = 1(H SHOULD BE BETWEEN 1.1 AND 1.9)
N903#3000 = 3(Z DEPTH IS ABOVE SURFACE D)

N9999
M99
%
