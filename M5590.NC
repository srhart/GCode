%
O113(TEST M5590)
(29-07-2024 - A)
M6T025300 (12MM SLOT MILL)
M43
G28H0
G50C0
G98G17 (Z-AXIS MILL)
G97
G00X0Y0Z10.
M1 
G262S5600M13
G66 P5590 X150. Y0. Z-5.5 B12. D3. E0.1 F600. R10.
G00C0
H90.
G67

M2

O5590(HELICAL PLUNGE)
(29-07-2024 - A)
(MILL A HELICAL POCKET WITH LH CUTTER COMPENSATION)
(X #24, Y #25, CENTRE)
(Z #26 IS DEPTH)
(B #2 IS TOOL DIAMETER)
(D #7 IS SURFACE)
(E #8 RADIAL ENGAGEMENT OF CUTTER, 0.2 = 20PCT)
(F #9 FEED RATE)
(R #18 IS CLEARANGE HEIGHT)

(PARAMS)
#117 = 2. (RAMPING ANGLE, IN DEGREES, 2 STANDARD)
#119 = 1.8 (HELIX SIZE FACTOR E.G. 10MM TOOL *1.8 = 18MM)
(1.8 STANDARD, KEEP BETWEEN 1.1 AND 1.9)
#153 = [#2*#119](DIAMETER OF INITAL HELICAL RAMP)
#155 = [#153-#2] (DIAMETER OF CENTRELINE OF TOOL)
#156 = [[3.14*#155*[TAN#117]] (DEPTH OF CUT PER HELIX)
#157 = FUP[[#26/#156]] (NUMBER OF HELIXES TO REACH Z DEPTH)
#159 = [#2*#8] (STEP OVER)
#170 =[#26/#157] (ADJUSTED DEPTH OF CUT PER HELIX)

IF [#26GE#7] GOTO 902
#32 = ABS[#26] (REMOVE SIGN, SHOULD ALLWAYS BE NEGATIVE)

$CL = [#32 - #7](CUT LEFT)
IF [ABS[$CL]LT#32] THEN #32 = ABS[$CL]

G00X#24Y#25
G01Z#7F#9 (MOVE TO SURFACE)
G140G40

WHILE [[$CL]NE0] DO1
$CL = [$CL - [-#32]]
#42=[#2/2+#2/4]
G01W[-#32]F[#9/4] (PLUNGE PECK)

WHILE [#33NE[$SIDE]] DO2
#42=#42+#8
IF [[$SIDE]LT#42] THEN #42 = $SIDE
$YOFF=SQRT[[#42*#42]-[[#42/2]*[#42/2]]]
G01X[#24-#42*2]Y#25 F#9
U[#42]V[-$YOFF]
U[#42*2]
U[#42]Y#25
U[-#42]V[$YOFF]
U[-#42*2]
X[#24-#42*2]Y#25
END2

IF [ABS[$CL]LT#32] THEN #32 = ABS[$CL]
END1

G01Z[#18]
GOTO 9999
N901#3000=001(TOOL B TOO LARGE FOR HEXAGON SIZE)
N902#3000=002(Z DEPTH IS GREATER THAN SURFACE D)
N902#3000=003(BOTTOM SIDE C IS GREATER THAN TOP SIDE A)
N9999
M99
%
