%
O5510 (MACRO)
(04-07-2024 - A)
(MILL CONCENTRIC HOLES NO CUTTER COMPENSATION)
(TYPE II PASSED VARABLES)
(AXIS SHOULD BE G17)
(ROTATING TOOL SHOULD BE STARTED)
(FEED RATE SHOULD BE SET)
(WILL BE CLIMB CUT)
(A,B AND C ARE THE HOLE START/END POSITION)
(EACH I,J,K ARE HOLES)
(RADIUS I, DEPTH K, TWICE ROUND SET J TO 1)
N010$HC = 1 (HOLE COUNT)
N012IF[#5EQ#0] THEN #5=0
N015$TT = ABS[#5] (GO ROUND TWICE)
N020$RAD = ABS[#4]/2
N030$DPTH = [-ABS[#6]]
N040G40 (REMOVE ANY CC)
N050G00X#1Y#2Z#3 (RAPID TO CENTRE)
N060WHILE [[[$DPTH]NE0] AND [[$HC]LE9]] DO1
N070G01Z[$DPTH] (PLUNGE HOLE)
N080Y[$RAD] (MOVE OUT TO RADIUS)
N090IF[#3007AND4] GOTO 95 (CHECK MIRROR IN Z)
N092G03J[-[$RAD]] (MAKE FULL CIRCLE CCW)
N093GOTO 100
N095G02J[-[$RAD]] (MAKE FULL CIRCLE CW IF Z MIRROR)
N100IF[[$TT]EQ0] GOTO 110 (SKIP TWICE ROUND)
N105J[-[$RAD]] (LGRA)
N110G01X#1Y#2 (RETURN TO CENTRE)
N120$RAD=[ABS[#[$HC*3+4]]/2]
N122IF[#[$HC*3+5]EQ#0] THEN #[$HC*3+5]=0
N125$TT=[ABS[#[$HC*3+5]]]
N130$DPTH=[-ABS[#[$HC*3+6]]]
N140$HC=$HC+1
N200END1
N210G00Z#3 (RAPID TO CLEARANCE HEIGHT)
N220$HC = 0
N230G143
M99
%